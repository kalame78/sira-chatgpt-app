<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
  >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>SIRA CORANIQUE</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0a0e17">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap"
    rel="stylesheet"
  >

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Poppins', 'sans-serif'] },
          colors: {
            'sira-dark': '#0a0e17',
            'sira-gold': '#FFD700',
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="styles.css">
</head>

<body class="bg-sira-dark text-slate-50">

  <!-- Audio de fond (optionnel) -->
  <audio id="bg-audio" loop>
    <source
      src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_07647d6928.mp3?filename=desert-wind-19366.mp3"
      type="audio/mpeg"
    >
  </audio>

  <!-- CONTENU PRINCIPAL -->
  <div id="app" class="min-h-screen max-w-6xl mx-auto px-4 pb-10">

    <!-- Header simple -->
    <header class="py-4 flex items-center justify-between">
      <div>
        <p class="text-[10px] uppercase tracking-[0.25em] text-sira-gold">
          Parcours 8–10 ans
        </p>
        <h1 class="text-3xl sm:text-4xl font-extrabold mt-1">
          SIRA CORANIQUE – <span class="text-sira-gold">Saison 1 : L’Aube</span>
        </h1>
      </div>

      <button
        type="button"
        class="hidden sm:inline-flex items-center gap-2 rounded-full border border-slate-600 px-4 py-2 text-xs font-medium text-slate-100 hover:bg-slate-800 transition"
        data-och
      >
        <span>Ouvrir l’espace de cours</span>
      </button>
    </header>

    <!-- HERO -->
    <section class="mt-4 mb-8 bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl p-5 sm:p-7 shadow-xl">
      <p class="text-xs uppercase tracking-[0.25em] text-sira-gold mb-2">
        Introduction à la Sira
      </p>
      <h2 class="text-2xl sm:text-3xl font-bold mb-3">
        Découvre comment Allah a préparé la vie du Prophète Muhammad ﷺ avant la révélation.
      </h2>
      <p class="text-sm text-slate-300 mb-4">
        La Mecque, la Kaaba, la tribu de Quraysh et l’Année de l’Éléphant.
        Chaque épisode relie une histoire de la Sira à un verset du Coran.
      </p>

      <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
        <button
          type="button"
          class="inline-flex justify-center items-center rounded-full bg-sira-gold text-sira-dark font-semibold px-6 py-3 text-sm shadow-lg hover:shadow-xl active:scale-[0.98] transition"
          data-episode-id="1"
        >
          Commencer l’aventure
        </button>

        <button
          type="button"
          class="inline-flex sm:hidden justify-center items-center rounded-full border border-slate-600 px-4 py-2 text-xs font-medium text-slate-100 hover:bg-slate-800 transition"
          data-och
        >
          Ouvrir l’espace de cours
        </button>

        <p class="text-[11px] text-slate-400 sm:ml-3">
          Durée conseillée par épisode : ~45 min · Niveau : 8–10 ans
        </p>
      </div>
    </section>

    <!-- SECTION EPISODES -->
    <section class="mt-4">
      <h3 class="text-lg sm:text-xl font-semibold mb-1">
        Commencer par le début
      </h3>
      <p class="text-sm text-slate-400 mb-4">
        Les 7 premiers épisodes pour comprendre les origines de la Sira.
      </p>

      <!-- RAIL HORIZONTAL -->
      <div class="overflow-x-auto pb-3">
        <div class="flex gap-4 min-w-max">

          <!-- EPISODE 1 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 1
              </p>
              <h4 class="text-lg font-semibold mb-2">
                Les Racines : Ibrahim &amp; la Kaaba
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                Comment La Mecque est devenue une ville spéciale et pourquoi la Kaaba a été construite.
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : “Et quand Ibrahim et Ismaël élevaient les fondations de la Maison…”
                (Sourate Al-Baqara).
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="1"
            >
              Voir l’épisode
            </button>
          </article>

          <!-- EPISODE 2 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 2
              </p>
              <h4 class="text-lg font-semibold mb-2">
                L’Année de l’Éléphant
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                Abraha voulait détruire la Kaaba… mais Allah a protégé Sa Maison d’une façon incroyable !
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : Sourate Al-Fil – “N’as-tu pas vu comment ton Seigneur a agi avec les gens
                de l’Éléphant ?”.
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="2"
            >
              Voir l’épisode
            </button>
          </article>

          <!-- EPISODE 3 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 3
              </p>
              <h4 class="text-lg font-semibold mb-2">
                Les Quraysh
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                Qui étaient la tribu du Prophète ﷺ ? Pourquoi ils étaient importants à La Mecque ?
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : Sourate Quraysh – “À cause des pactes des Quraysh…”.
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="3"
            >
              Voir l’épisode
            </button>
          </article>

          <!-- EPISODE 4 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 4
              </p>
              <h4 class="text-lg font-semibold mb-2">
                L’Orphelin du Désert
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                Le Prophète ﷺ a grandi orphelin mais toujours protégé par Allah et entouré de miséricorde.
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : Sourate Ad-Duha – “Ne t’a-t-Il pas trouvé orphelin, puis Il t’a accordé un refuge ?”.
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="4"
            >
              Voir l’épisode
            </button>
          </article>

          <!-- EPISODE 5 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 5
              </p>
              <h4 class="text-lg font-semibold mb-2">
                L’Ouverture de la Poitrine
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                L’épisode où le cœur du Prophète ﷺ est purifié pour recevoir la lumière de la Révélation.
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : Sourate Ash-Sharh – “N’avons-nous pas ouvert pour toi ta poitrine ?”.
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="5"
            >
              Voir l’épisode
            </button>
          </article>

          <!-- EPISODE 6 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 6
              </p>
              <h4 class="text-lg font-semibold mb-2">
                Le Moine Bahira
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                Lors d’un voyage, un moine reconnaît les signes de la prophétie chez le jeune Muhammad ﷺ.
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : “Tu es, certes, d’une moralité éminente.” (Sourate Al-Qalam).
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="6"
            >
              Voir l’épisode
            </button>
          </article>

          <!-- EPISODE 7 -->
          <article class="min-w-[280px] max-w-xs bg-slate-900 rounded-2xl p-4 flex flex-col justify-between">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-sira-gold mb-2">
                Saison 1 · Épisode 7
              </p>
              <h4 class="text-lg font-semibold mb-2">
                Al-Amin &amp; Khadija
              </h4>
              <p class="text-sm text-slate-300 mb-3">
                Comment le Prophète ﷺ est devenu “Al-Amîn” et comment Khadija رضي الله عنها l’a soutenu.
              </p>
              <p class="text-[12px] text-slate-400 mb-3">
                Verset clé : “Et tu es certes, d’un immense caractère.” (Al-Qalam 68:4).
              </p>
            </div>
            <div class="mt-2 text-[11px] text-slate-500 mb-3 flex justify-between">
              <span>Durée : ~45 min</span>
              <span>Niveau : 8–10 ans</span>
            </div>
            <button
              type="button"
              class="w-full rounded-full bg-slate-800 hover:bg-slate-700 text-sm font-medium py-2 mt-auto"
              data-episode-id="7"
            >
              Voir l’épisode
            </button>
          </article>

        </div>
      </div>
    </section>
  </div>

  <!-- MODAL EPISODE -->
  <div
    id="episode-modal"
    class="fixed inset-0 z-40 hidden items-center justify-center bg-black/70 px-3"
  >
    <div class="relative max-w-xl w-full bg-slate-900 rounded-3xl shadow-2xl p-5 sm:p-6">
      <button
        type="button"
        class="js-episode-close absolute right-4 top-3 text-slate-400 hover:text-white text-2xl leading-none"
        aria-label="Fermer"
      >
        ×
      </button>

      <p
        id="episode-modal-tag"
        class="text-[10px] uppercase tracking-[0.25em] text-sira-gold mb-2"
      >
        Saison 1 · Épisode
      </p>
      <h2 id="episode-modal-title" class="text-xl font-semibold mb-3">
        Titre de l’épisode
      </h2>

      <p id="episode-modal-summary" class="text-sm text-slate-200 mb-3">
        Résumé de l’épisode…
      </p>

      <p id="episode-modal-verse" class="text-[13px] text-slate-300 mb-3">
        Verset clé…
      </p>

      <p id="episode-modal-extra" class="text-[12px] text-slate-400 mb-4">
        Infos pratiques…
      </p>

      <div class="flex flex-col sm:flex-row gap-2 sm:justify-end mt-2">
        <button
          type="button"
          class="js-episode-close rounded-full border border-slate-600 px-4 py-2 text-xs font-medium text-slate-100 hover:bg-slate-800"
        >
          Fermer
        </button>

        <button
          type="button"
          class="js-episode-open-och rounded-full bg-sira-gold text-sira-dark px-4 py-2 text-xs font-semibold hover:brightness-110"
        >
          Accéder à la leçon sur la plateforme
        </button>
      </div>
    </div>
  </div>

  <!-- MODAL OCH (PLEIN ÉCRAN DANS LA PWA) -->
  <div
    id="och-modal"
    class="fixed inset-0 z-50 hidden bg-slate-950"
  >
    <div class="flex flex-col h-full">
      <!-- Barre du haut -->
      <header
        class="flex items-center justify-between px-4 py-3 bg-slate-900 border-b border-slate-800"
      >
        <div>
          <p class="text-[10px] uppercase tracking-[0.25em] text-sira-gold">
            Parcours sécurisé
          </p>
          <h2 class="text-sm sm:text-base font-semibold text-slate-50">
            Espace de cours Deenvertissement
          </h2>
          <p class="text-[11px] text-slate-400 hidden sm:block">
            Cette fenêtre ouvre ton espace de cours (OCH).
          </p>
        </div>

        <button
          type="button"
          class="js-och-close text-slate-400 hover:text-white text-2xl leading-none"
          aria-label="Fermer l’espace de cours"
        >
          ×
        </button>
      </header>

      <!-- Contenu OCH -->
      <main class="flex-1 bg-slate-950">
        <iframe
          id="och-iframe"
          class="w-full h-full border-0"
          title="Espace de cours Deenvertissement"
          loading="lazy"
          referrerpolicy="no-referrer"
          allow="clipboard-write; fullscreen"
        ></iframe>
      </main>

      <!-- Bandeau bas -->
      <footer class="px-4 py-2 text-[11px] text-slate-400 bg-slate-900 border-t border-slate-800">
        L’accès aux cours se fait via ton espace sécurisé OCH. Si la page ne charge pas, vérifie ta
        connexion internet.
      </footer>
    </div>
  </div>

  <!-- JS -->
  <script src="app.js"></script>

  <!-- Service Worker PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(reg => console.log("SW installé :", reg.scope))
          .catch(err => console.log("Erreur SW :", err));
      });
    }
  </script>

</body>
</html>
