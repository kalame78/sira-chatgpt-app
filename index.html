<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>SIRA CORANIQUE</title>

    <!-- PWA -->
    <meta name="theme-color" content="#0a0e17">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Poppins', 'sans-serif'] },
                    colors: {
                        'sira-dark': '#0a0e17',
                        'sira-gold': '#FFD700',
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- Audio de fond (optionnel) -->
    <audio id="bg-audio" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_07647d6928.mp3?filename=desert-wind-19366.mp3" type="audio/mpeg">
    </audio>

    <!-- Conteneur de l’app -->
    <div id="app"></div>

    <!-- Modal OCH : accès aux cours -->
    <div
      id="och-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center bg-black/70"
    >
      <div
        class="bg-slate-900 rounded-3xl shadow-2xl w-[95vw] max-w-5xl h-[80vh] relative flex flex-col overflow-hidden"
      >
        <!-- Header de la modal -->
        <div
          class="flex items-center justify-between px-6 py-4 border-b border-slate-700 bg-slate-900/80 backdrop-blur-sm"
        >
          <div>
            <p class="text-[10px] uppercase tracking-[0.25em] text-amber-400">
              Parcours sécurisé
            </p>
            <h2 class="text-lg font-semibold text-white">
              Espace de cours Deenvertissement
            </h2>
            <p class="text-xs text-slate-400">
              Cette fenêtre ouvre ton espace de cours.
            </p>
          </div>

          <button
            type="button"
            class="js-och-close text-slate-400 hover:text-white text-2xl leading-none"
            aria-label="Fermer la fenêtre"
          >
            ×
          </button>
        </div>

        <!-- Corps : iframe OCH -->
        <div class="flex-1 bg-slate-950">
          <iframe
            id="och-iframe"
            class="w-full h-full border-0"
            title="Espace de cours Deenvertissement"
            loading="lazy"
            referrerpolicy="no-referrer"
            allow="clipboard-write; fullscreen"
          ></iframe>
        </div>

        <!-- Bas de la modal -->
        <div
          class="px-6 py-3 text-[11px] text-slate-400 border-t border-slate-800 bg-slate-900/80"
        >
          L’accès aux cours se fait via ton espace sécurisé OCH. Si la page ne
          charge pas, vérifie ta connexion internet.
        </div>
      </div>
    </div>

    <!-- Logique principale de l’app -->
    <script src="app.js"></script>

    <!-- Service Worker PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log("SW installé :", reg.scope))
                    .catch(err => console.log("Erreur SW :", err));
            });
        }
    </script>

</body>
</html>
